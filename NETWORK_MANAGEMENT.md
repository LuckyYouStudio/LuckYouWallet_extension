# 网络管理功能详细说明

## 概述

LuckYouWallet 现在支持类似 MetaMask 的网络管理功能，允许用户添加、切换和管理自定义网络。

## 功能特性

### 1. 预设网络
钱包默认包含以下网络：
- **Ethereum Mainnet** (链ID: 1)
- **Sepolia Testnet** (链ID: 11155111)
- **Polygon** (链ID: 137)
- **BSC** (链ID: 56)
- **Arbitrum One** (链ID: 42161)
- **Optimism** (链ID: 10)

### 2. 自定义网络
用户可以添加任意 EVM 兼容的网络，包括：
- 私有网络
- 测试网络
- 其他公链网络

## 使用方法

### 添加自定义网络

#### 步骤 1: 进入网络管理界面
1. 打开钱包插件
2. 在钱包界面顶部找到网络选择器
3. 点击右侧的"设置"按钮

#### 步骤 2: 添加网络
1. 在网络管理界面点击"添加网络"按钮
2. 填写网络信息：
   - **网络名称**: 显示在网络列表中的名称
   - **RPC URL**: 网络的 RPC 端点地址
   - **链ID**: 网络的唯一标识符
   - **货币符号**: 网络原生代币的符号
   - **区块浏览器**: 可选的区块浏览器 URL

#### 步骤 3: 验证和保存
1. 点击"添加网络"按钮
2. 系统会自动验证网络连接和链ID
3. 验证成功后网络会被保存并添加到列表中

### 网络切换

#### 方法 1: 使用下拉菜单
1. 在钱包界面顶部找到网络选择器
2. 点击下拉菜单选择目标网络
3. 网络会自动切换，余额会实时更新

#### 方法 2: 在网络管理界面切换
1. 进入网络管理界面
2. 找到目标网络
3. 点击"切换"按钮

### 删除自定义网络

1. 进入网络管理界面
2. 找到要删除的自定义网络
3. 点击"删除"按钮
4. 确认删除操作

**注意**: 预设网络无法删除，只能删除用户添加的自定义网络。

## 网络配置示例

### 常见测试网络配置

#### Goerli Testnet
- 网络名称: Goerli Testnet
- RPC URL: https://goerli.infura.io/v3/YOUR-PROJECT-ID
- 链ID: 5
- 货币符号: ETH
- 区块浏览器: https://goerli.etherscan.io

#### Mumbai Testnet (Polygon)
- 网络名称: Mumbai Testnet
- RPC URL: https://polygon-mumbai.infura.io/v3/YOUR-PROJECT-ID
- 链ID: 80001
- 货币符号: MATIC
- 区块浏览器: https://mumbai.polygonscan.com

#### BSC Testnet
- 网络名称: BSC Testnet
- RPC URL: https://data-seed-prebsc-1-s1.binance.org:8545
- 链ID: 97
- 货币符号: tBNB
- 区块浏览器: https://testnet.bscscan.com

### 私有网络配置

#### 本地 Hardhat 网络
- 网络名称: Local Hardhat
- RPC URL: http://127.0.0.1:8545
- 链ID: 31337
- 货币符号: ETH
- 区块浏览器: (留空)

#### Ganache 网络
- 网络名称: Local Ganache
- RPC URL: http://127.0.0.1:7545
- 链ID: 1337
- 货币符号: ETH
- 区块浏览器: (留空)

## 技术细节

### 网络验证
添加网络时会进行以下验证：
1. **连接性测试**: 验证 RPC URL 是否可访问
2. **链ID验证**: 确认提供的链ID与网络实际链ID匹配
3. **网络响应测试**: 测试基本的 RPC 调用

### 存储机制
- 自定义网络配置存储在 Chrome Extension Storage 中
- 网络配置包含完整的网络信息
- 支持跨会话持久化

### 安全考虑
- 网络验证确保添加的网络是有效的
- 自定义网络与预设网络隔离
- 网络切换不会影响钱包安全性

## 故障排除

### 常见问题

#### 1. 网络验证失败
**问题**: 添加网络时显示"网络验证失败"
**解决方案**:
- 检查 RPC URL 是否正确
- 确认链ID是否匹配
- 验证网络是否可访问

#### 2. 网络切换后余额不更新
**问题**: 切换网络后余额显示不正确
**解决方案**:
- 刷新钱包界面
- 检查网络连接
- 确认地址在当前网络有效

#### 3. 自定义网络被删除
**问题**: 添加的自定义网络消失
**解决方案**:
- 检查浏览器存储是否被清除
- 重新添加网络配置
- 确认插件权限正常

### 错误代码说明

- **ERR_NETWORK_NOT_FOUND**: 网络配置不存在
- **ERR_INVALID_RPC_URL**: RPC URL 格式错误
- **ERR_CHAIN_ID_MISMATCH**: 链ID不匹配
- **ERR_NETWORK_UNREACHABLE**: 网络不可访问

## 最佳实践

### 网络命名
- 使用清晰的网络名称
- 包含网络类型标识（如 Testnet、Mainnet）
- 避免使用特殊字符

### RPC URL 选择
- 优先使用官方 RPC 端点
- 考虑使用付费 RPC 服务以获得更好的性能
- 避免使用不稳定的公共 RPC

### 安全建议
- 不要添加来源不明的网络
- 定期验证自定义网络的有效性
- 删除不再使用的网络配置

## 更新日志

### v1.0.0
- 初始网络管理功能
- 支持预设网络和自定义网络
- 网络验证和切换功能
- 完整的用户界面

### 计划功能
- 网络分组管理
- 网络性能监控
- 批量网络导入/导出
- 网络配置模板
